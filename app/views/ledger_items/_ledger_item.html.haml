%tr{:class => "smaller #{cycle('odd', 'even')}"}
  %td= link_to(ledger_item.id, ledger_item)
  %td= link_to(ledger_item.account.name, account_path(ledger_item.account))
  %td
    - if ledger_item.sender
      = link_to(ledger_item.sender.name, person_path(ledger_item.sender))
    - else
      = button_to("Add", edit_resource_path(ledger_item), :method => :get)
  %td
    - if ledger_item.recipient
      = link_to(ledger_item.recipient.name, person_path(ledger_item.recipient))
    - else
      = button_to("Add", edit_resource_path(ledger_item), :method => :get)
  %td= ledger_item.transacted_on || ledger_item.created_at.to_date
  %td.currency= monetize(ledger_item.total_amount, ledger_item.currency_symbol)
  %td= truncate(ledger_item.description)
  %td
    - if ledger_item.matched?
      = link_to("View matches", ledger_item.match)
    - elsif ledger_item.matchable?
      - form_tag("#", :method => "post") do
        = hidden_field_tag(:ledger_item_id, ledger_item.id)
        = submit_tag("Match")