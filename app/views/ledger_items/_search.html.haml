- form_tag(collection_path, :method => "get", :class => "search") do
  %fieldset
    %ul
      %li
        %label.smaller{:for => "from_date"} From:
        = select_date(params_to_date(params[:from_date]), :prompt => true, :prefix => "from_date")
      %li
        %label.smaller To:
        = select_date(params_to_date(params[:to_date]), :prompt => true, :prefix => "to_date")
  %fieldset
    %ul
      - if params[:account_id].nil?
        %li
          = select_tag(:account, options_for_select(Account.all.inject([['Select account', '']]) { |r, a| r << [a.name, a.id] }, params[:account].to_i), :class => "autocomplete")
      - if Contact.self.count > 1
        %li= select_tag(:contact, options_for_select(Contact.self.inject({ 'All selves' => '' }) { |r, c| r[c.name] = c.id; r}, params[:contact].to_i))
      %li= text_field_tag(:query, params[:query])
      %li
        =check_box_tag(:unmatched, nil, params[:unmatched])
        %label.smaller Unmatched only
      %li= submit_tag("Search", :name => nil)