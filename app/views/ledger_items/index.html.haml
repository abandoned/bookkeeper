- title 'Transactions', false

= data_for_obese_autocomplete

- unless @cart.ledger_items.empty?
  = render(:partial => 'cart').html_safe!

= render :partial => 'search'

- if collection.size > 0
  %table.data-grid
    %thead
      %tr
        %th ID
        %th Account
        %th Sender
        %th Recipient
        %th Date
        %th Amount
        %th Description
        %th Match
    %tfoot
      %tr
        %td{:colspan => 6, :class => 'currency'}
          - counter = 0
          = @totals.collect{ |k, v| monetize(v, k) }.join('<br>').html_safe!
    %tbody
      = render(:partial => 'ledger_item', :collection => collection)
  = will_paginate(collection, :inner_window => 2, :class => 'pagination')
- else
  %p.large No transactions found
      
%footer
  = link_to('Record new transaction »', new_ledger_item_path(:account => params[:account]), :class => 'button')
  = link_to('Export »', ledger_items_path(params.merge(:format => :csv)), :class => 'button')